<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>Vall Store ¬∑ game shop</title>
  
  <!-- Google Fonts: Poppins modern -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <style>
    /* ========== RESET & VARIABLES ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    html, body {
      overflow-x: hidden;
      width: 100%;
      max-width: 100%;
      position: relative;
      height: 100%;
    }

    body {
      background-color: #fafafa;
      color: #111;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* ========== BLOCKED MESSAGE ========== */
    .blocked-message {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, #ff6b6b 0%, #ff4757 100%);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
    }
    
    .blocked-card {
      background: white;
      max-width: 400px;
      width: 100%;
      border-radius: 40px;
      padding: 40px 30px;
      box-shadow: 0 30px 60px rgba(0,0,0,0.3);
      text-align: center;
    }
    
    .blocked-card i {
      font-size: 5rem;
      color: #ff4757;
      margin-bottom: 20px;
    }
    
    .blocked-card h2 {
      font-size: 2rem;
      color: #0b1e33;
      margin-bottom: 15px;
    }
    
    .blocked-card p {
      font-size: 1.1rem;
      color: #555;
      margin-bottom: 25px;
    }
    
    .blocked-card button {
      background: #ff4757;
      color: white;
      border: none;
      border-radius: 40px;
      padding: 15px 30px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
    }

    /* ========== LOADING SCREEN ========== */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(145deg, #ffffff 0%, #f2f7ff 100%);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.6s ease, visibility 0.6s;
      opacity: 1;
      visibility: visible;
    }
    .loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .loading-card {
      max-width: 90%;
      width: 400px;
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(10px);
      border-radius: 60px;
      padding: 30px 20px;
      box-shadow: 0 30px 60px rgba(43,127,255,0.2);
      border: 2px solid rgba(255,255,255,0.5);
      text-align: center;
    }

    .loading-title {
      font-size: clamp(1.5rem, 6vw, 2.2rem);
      font-weight: 700;
      color: #0b1e33;
      margin-bottom: 15px;
      letter-spacing: -0.5px;
    }
    .loading-title span {
      color: #2b7fff;
    }

    .loading-animation {
      margin: 20px 0;
      position: relative;
    }

    .loading-bar-container {
      width: 100%;
      height: 20px;
      background: #e4ecf7;
      border-radius: 60px;
      overflow: hidden;
      box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }

    .loading-bar-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #2b7fff, #6ca5ff);
      border-radius: 60px;
      transition: width 0.3s ease-out;
      box-shadow: 0 0 15px #2b7fff;
    }

    .loading-text {
      font-size: clamp(1rem, 4vw, 1.6rem);
      font-weight: 600;
      color: #0a2540;
      min-height: 3rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .loading-text i {
      color: #2b7fff;
      font-size: clamp(1.2rem, 5vw, 2rem);
    }

    .loading-percent {
      font-size: clamp(1.2rem, 5vw, 2rem);
      font-weight: 700;
      background: #0b1e33;
      color: white;
      display: inline-block;
      padding: 6px 20px;
      border-radius: 60px;
      margin-top: 10px;
    }

    .dot-flash {
      display: inline-block;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #2b7fff;
      margin: 0 2px;
      animation: flash 1s infinite alternate;
    }

    @keyframes flash {
      0% { opacity: 0.2; transform: scale(0.8); }
      100% { opacity: 1; transform: scale(1.2); }
    }

    /* ========== LAYOUT UTAMA ========== */
    .app {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 0 15px;
      flex: 1;
    }

    footer {
      text-align: center;
      padding: 20px 0;
      color: #8b9eb0;
      font-size: 0.85rem;
      width: 100%;
    }

    /* ========== HEADER & NAVIGASI ========== */
    .header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 0;
      width: 100%;
    }

    .menu-btn {
      background: none;
      border: none;
      font-size: 24px;
      color: #0a2540;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: color 0.2s;
      flex-shrink: 0;
    }

    .logo {
      font-weight: 700;
      font-size: clamp(1.2rem, 4vw, 1.8rem);
      letter-spacing: -0.5px;
      color: #0b1e33;
      white-space: nowrap;
    }
    .logo span {
      color: #2b7fff;
    }

    .header-right {
      width: 40px;
      flex-shrink: 0;
      display: flex;
      justify-content: flex-end;
    }

    #loginIndicator {
      font-size: 0.9rem;
      background: #eef4ff;
      padding: 6px 10px;
      border-radius: 40px;
      color: #0b1e33;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      white-space: nowrap;
    }
    #loginIndicator i {
      color: #2b7fff;
      font-size: 1rem;
    }

    /* ========== SIDEBAR ========== */
    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.2);
      backdrop-filter: blur(3px);
      z-index: 998;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.25s ease;
    }
    .sidebar-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: -280px;
      width: 260px;
      max-width: 85%;
      height: 100%;
      background: white;
      box-shadow: 4px 0 30px rgba(0,0,0,0.1);
      z-index: 999;
      transition: left 0.3s cubic-bezier(0.2, 0.9, 0.3, 1);
      padding: 20px 0 0 0;
      border-top-right-radius: 24px;
      border-bottom-right-radius: 24px;
      overflow-y: auto;
    }
    .sidebar.open {
      left: 0;
    }

    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 15px 20px 15px;
      border-bottom: 1px solid #eee;
    }
    .sidebar-header h2 {
      font-size: 1.3rem;
      font-weight: 600;
      color: #0b1e33;
    }
    .close-sidebar {
      background: none;
      border: none;
      font-size: 22px;
      cursor: pointer;
      color: #555;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .sidebar-profile {
      padding: 15px;
      text-align: center;
      border-bottom: 2px dashed #ccc;
      margin-bottom: 10px;
    }
    
    .sidebar-profile .profile-icon {
      font-size: 3rem;
      color: #2b7fff;
      margin-bottom: 8px;
    }
    
    .sidebar-profile .profile-name {
      font-size: 1.1rem;
      font-weight: 600;
      color: #0b1e33;
      margin-bottom: 4px;
      word-break: break-word;
    }
    
    .sidebar-profile .profile-email {
      font-size: 0.8rem;
      color: #666;
      margin-bottom: 8px;
      word-break: break-all;
    }
    
    .sidebar-profile .profile-divider {
      margin: 10px 0;
      color: #2b7fff;
      font-weight: 600;
      letter-spacing: 1px;
      font-size: 0.9rem;
    }
    
    .sidebar-profile .profile-badge {
      background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
      color: #0b1e33;
      padding: 4px 8px;
      border-radius: 40px;
      font-size: 0.75rem;
      display: inline-block;
    }

    .sidebar-menu {
      list-style: none;
      padding: 5px 10px;
    }
    .sidebar-menu li {
      margin-bottom: 5px;
    }
    .sidebar-menu li a {
      text-decoration: none;
      font-size: 1rem;
      font-weight: 500;
      color: #222;
      display: block;
      padding: 10px 15px;
      border-radius: 12px;
      transition: background 0.2s, color 0.2s;
      cursor: pointer;
    }
    .sidebar-menu li a i {
      width: 24px;
      margin-right: 8px;
    }

    /* ========== HOME PROFILE SECTION WITH BANNER ========== */
    .home-profile {
      background: white;
      border-radius: 30px;
      padding: 0;
      margin: 15px 0;
      box-shadow: 0 10px 25px rgba(0,0,0,0.03);
      border: 1px solid #f0f3f8;
      width: 100%;
      overflow: hidden;
      position: relative;
    }
    
    .profile-banner {
      width: 100%;
      height: 150px;
      background-image: url('https://files.catbox.moe/f5fpq9.jpg');
      background-size: cover;
      background-position: center;
      position: relative;
    }
    
    .profile-banner::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.6) 100%);
    }
    
    .profile-avatar-container {
      display: flex;
      justify-content: center;
      margin-top: -50px;
      position: relative;
      z-index: 5;
    }
    
    .profile-image {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid white;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .profile-desc {
      padding: 15px 20px 20px 20px;
      text-align: center;
      background: white;
    }
    
    .profile-desc h3 {
      font-size: clamp(1.3rem, 5vw, 1.9rem);
      font-weight: 700;
      color: #0b1e33;
      margin-bottom: 8px;
      line-height: 1.2;
    }
    
    .profile-desc h3 i {
      color: #2b7fff;
      margin-right: 5px;
    }
    
    .profile-desc p {
      font-size: clamp(0.9rem, 3vw, 1.2rem);
      color: #2d3a4f;
      font-weight: 400;
      background: #eef4ff;
      padding: 12px 15px;
      border-radius: 30px;
      display: inline-block;
      width: 100%;
      max-width: 600px;
    }

    /* ========== SEARCH BAR ========== */
    .search-container {
      margin: 15px 0 25px 0;
      width: 100%;
    }
    .search-wrapper {
      display: flex;
      align-items: center;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 60px;
      padding: 4px 15px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.02);
      transition: box-shadow 0.2s;
      width: 100%;
    }
    .search-wrapper:focus-within {
      box-shadow: 0 4px 18px rgba(43, 127, 255, 0.15);
      border-color: #2b7fff;
    }
    .search-wrapper i {
      color: #8899aa;
      font-size: 1.1rem;
      margin-right: 8px;
      flex-shrink: 0;
    }
    .search-wrapper input {
      width: 100%;
      padding: 12px 0;
      border: none;
      outline: none;
      font-size: 0.95rem;
      font-weight: 400;
      background: transparent;
    }

    /* ========== SECTION TITLE ========== */
    .section-title {
      font-size: clamp(1.3rem, 5vw, 1.8rem);
      font-weight: 700;
      margin: 30px 0 15px 0;
      color: #0b1e33;
      display: block;
      position: relative;
      padding-left: 15px;
    }

    .section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 5px;
      height: 70%;
      background: linear-gradient(135deg, #2b7fff, #6ca5ff);
      border-radius: 10px;
    }

    /* ========== PRODUCT GRID ========== */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
      width: 100%;
    }

    .product-card {
      background: linear-gradient(145deg, #ffffff, #fafcff);
      border-radius: 28px;
      padding: 20px 20px 18px;
      box-shadow: 0 10px 25px -8px rgba(0,0,0,0.06), 0 2px 6px rgba(0,0,0,0.02);
      border: 1px solid rgba(43,127,255,0.1);
      transition: all 0.3s cubic-bezier(0.2, 0.9, 0.4, 1);
      position: relative;
      display: flex;
      flex-direction: column;
      height: 100%;
      min-height: 300px;
      animation: fadeInUp 0.5s ease forwards;
      backdrop-filter: blur(2px);
    }

    .product-card:hover {
      transform: translateY(-8px) scale(1.01);
      box-shadow: 0 25px 40px -12px rgba(43,127,255,0.25), 0 8px 15px rgba(0,0,0,0.05);
      border-color: #2b7fff;
      background: white;
    }

    .product-image {
      width: 100%;
      height: 190px;
      object-fit: cover;
      border-radius: 20px;
      margin-bottom: 16px;
      background: #f0f4fa;
      border: 2px solid white;
      box-shadow: 0 8px 18px -6px rgba(43,127,255,0.2);
      transition: all 0.3s ease;
    }

    .product-card:hover .product-image {
      box-shadow: 0 12px 24px -8px #2b7fff;
      transform: scale(1.02);
    }

    .product-name {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 6px;
      color: #0b1e33;
      line-height: 1.4;
      letter-spacing: -0.3px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .product-name::before {
      content: 'üî•';
      font-size: 1rem;
      opacity: 0.8;
    }

    .product-desc {
      font-size: 0.9rem;
      color: #4a5a6e;
      margin-bottom: 18px;
      flex-grow: 1;
      line-height: 1.6;
      background: #f8fafd;
      padding: 10px 12px;
      border-radius: 18px;
      border-left: 3px solid #2b7fff30;
    }

    .product-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: auto;
      padding-top: 12px;
      border-top: 2px dashed #e9eef4;
      flex-wrap: wrap;
      gap: 8px;
    }

    .product-price {
      font-weight: 800;
      font-size: 1.5rem;
      color: #2b7fff;
      background: linear-gradient(135deg, #2b7fff, #0055cc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.5px;
      display: flex;
      align-items: center;
      gap: 3px;
    }

    .product-price::before {
      content: 'üí∞';
      font-size: 1.1rem;
      -webkit-text-fill-color: initial;
      color: #f6b83e;
    }

    .btn-order {
      background: linear-gradient(135deg, #25D366, #128C7E);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 12px 20px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 8px 18px -6px rgba(37, 211, 102, 0.4);
      border: 1px solid rgba(255,255,255,0.2);
      width: 100%;
      justify-content: center;
      margin-top: 8px;
    }

    .btn-order:hover {
      transform: scale(1.02) translateY(-2px);
      box-shadow: 0 15px 25px -8px #25D366;
      background: linear-gradient(135deg, #22c55e, #0e7b6e);
    }

    .dev-actions {
      margin-top: 12px;
      display: flex;
      gap: 10px;
      justify-content: space-between;
      border-top: 1px solid #edf2f7;
      padding-top: 14px;
    }

    .btn-edit-product, .btn-delete-product {
      border: none;
      border-radius: 40px;
      padding: 10px 16px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      flex: 1;
      justify-content: center;
    }

    .btn-edit-product {
      background: linear-gradient(135deg, #fbbf24, #f59e0b);
      color: #422800;
      box-shadow: 0 6px 14px -6px #fbbf24;
    }

    .btn-delete-product {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
      box-shadow: 0 6px 14px -6px #ef4444;
    }

    .btn-edit-product:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 20px -8px #fbbf24;
    }

    .btn-delete-product:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 20px -8px #ef4444;
    }

    .product-card:nth-child(1) { animation-delay: 0.1s; }
    .product-card:nth-child(2) { animation-delay: 0.2s; }
    .product-card:nth-child(3) { animation-delay: 0.3s; }
    .product-card:nth-child(4) { animation-delay: 0.4s; }
    .product-card:nth-child(5) { animation-delay: 0.5s; }

    #productGrid2 .product-card {
      border-left: 3px solid #ffa502;
    }

    #productGrid2 .product-card:hover {
      border-color: #ffa502;
    }

    #productGrid3 .product-card {
      border-left: 3px solid #ff6b6b;
    }

    #productGrid3 .product-card:hover {
      border-color: #ff6b6b;
    }

    .empty-grid-message {
      grid-column: 1 / -1;
      background: linear-gradient(145deg, #ffffff, #f5f9ff);
      border-radius: 40px;
      padding: 70px 30px;
      text-align: center;
      border: 3px dashed rgba(43,127,255,0.2);
      transition: all 0.4s ease;
      min-height: 320px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.02);
    }

    .empty-grid-message i {
      font-size: 5rem;
      color: #2b7fff;
      margin-bottom: 20px;
      opacity: 0.5;
      transition: all 0.4s;
      filter: drop-shadow(0 10px 10px rgba(43,127,255,0.2));
    }

    .empty-grid-message p {
      color: #1e293b;
      font-size: 1.4rem;
      margin-bottom: 12px;
      font-weight: 600;
      background: white;
      padding: 6px 20px;
      border-radius: 60px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.02);
    }

    .empty-grid-message small {
      color: #64748b;
      font-size: 1rem;
      background: #eef2f6;
      padding: 10px 28px;
      border-radius: 60px;
      display: inline-block;
      font-weight: 500;
    }

    .empty-grid-message:hover {
      background: white;
      border-color: #2b7fff;
      box-shadow: 0 25px 45px -15px rgba(43,127,255,0.3);
      transform: scale(1.01);
    }

    .empty-grid-message:hover i {
      opacity: 0.9;
      transform: scale(1.1) rotate(5deg);
      color: #2b7fff;
    }

    #productGrid2 .empty-grid-message {
      border-color: #ffa50250;
    }

    #productGrid2 .empty-grid-message i {
      color: #ffa502;
    }

    #productGrid3 .empty-grid-message {
      border-color: #ff6b6b50;
    }

    #productGrid3 .empty-grid-message i {
      color: #ff6b6b;
    }

    /* ========== COUPON CARD - VERSI RAPIH ========== */
    .coupon-card-vall {
      background: white;
      border-radius: 24px;
      padding: 18px 20px;
      margin-bottom: 16px;
      border: 1px solid rgba(43,127,255,0.15);
      box-shadow: 0 5px 15px -8px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 15px;
      position: relative;
      overflow: hidden;
    }

    .coupon-card-vall:hover {
      transform: translateY(-3px);
      border-color: #2b7fff;
      box-shadow: 0 12px 25px -10px rgba(43,127,255,0.3);
    }

    .coupon-left-vall {
      display: flex;
      align-items: center;
      gap: 15px;
      flex: 2;
      min-width: 180px;
    }

    .coupon-code-vall {
      font-size: 1.4rem;
      font-weight: 700;
      color: #2b7fff;
      background: #eef4ff;
      padding: 6px 15px;
      border-radius: 40px;
      letter-spacing: 1px;
      word-break: break-word;
    }

    .coupon-value-vall {
      font-size: 1.3rem;
      font-weight: 700;
      color: #f59e0b;
      background: #fff3e0;
      padding: 6px 12px;
      border-radius: 40px;
      white-space: nowrap;
    }

    .coupon-value-vall::after {
      content: '%';
      margin-left: 2px;
      font-size: 1rem;
    }

    .coupon-right-vall {
      flex: 3;
      min-width: 220px;
    }

    .coupon-desc-vall {
      font-size: 0.95rem;
      color: #4a5a6e;
      margin-bottom: 8px;
      border-left: 3px solid #2b7fff;
      padding-left: 10px;
    }

    .coupon-stats-vall {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin: 8px 0;
      font-size: 0.85rem;
      color: #64748b;
    }

    .coupon-stats-vall span {
      display: flex;
      align-items: center;
      gap: 4px;
      background: #f8fafd;
      padding: 4px 12px;
      border-radius: 30px;
    }

    .coupon-stats-vall i {
      color: #2b7fff;
      width: 16px;
      font-size: 0.9rem;
    }

    .coupon-expiry-vall {
      font-size: 0.85rem;
      color: #64748b;
      margin: 8px 0;
      background: #f8fafd;
      padding: 5px 12px;
      border-radius: 30px;
      display: inline-block;
    }

    .coupon-expiry-vall i {
      color: #ef4444;
      margin-right: 5px;
    }

    .coupon-status-vall {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 15px;
      border-radius: 30px;
      font-size: 0.8rem;
      font-weight: 600;
      margin: 5px 0;
    }

    .coupon-status-vall.active {
      background: #d1fae5;
      color: #065f46;
    }

    .coupon-status-vall.expired {
      background: #fee2e2;
      color: #991b1b;
    }

    .coupon-actions-vall {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .btn-coupon-vall {
      border: none;
      border-radius: 40px;
      padding: 6px 16px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-coupon-vall.edit {
      background: #fbbf24;
      color: #422800;
    }

    .btn-coupon-vall.delete {
      background: #ef4444;
      color: white;
    }

    .btn-coupon-vall:hover {
      transform: translateY(-2px);
      filter: brightness(1.1);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* ========== TOMBOL TAMBAH PRODUK - DEV PANEL ========== */
    .btn-add-product {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 40px;
      padding: 12px 24px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      transition: all 0.3s ease;
      border: 2px solid transparent;
      margin-bottom: 20px;
    }
    
    .btn-add-product:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
      border-color: white;
    }
    
    .btn-add-product i {
      font-size: 1.1rem;
    }
    
    /* Tombol di dev panel disembunyikan untuk user biasa */
    #btnAddProductFromDev,
    #btnAddUserFromDev,
    #btnAddCouponFromDev {
      display: none;
    }
    
    #devPanel[style*="display: block"] #btnAddProductFromDev,
    #devPanel[style*="display: block"] #btnAddUserFromDev,
    #devPanel[style*="display: block"] #btnAddCouponFromDev {
      display: inline-flex;
    }

    /* ========== DEV PANEL ========== */
    .dev-panel {
      background: white;
      border-radius: 30px;
      padding: 25px;
      margin: 30px 0;
      border: 2px solid #fda085;
      box-shadow: 0 15px 30px rgba(253, 160, 133, 0.2);
      width: 100%;
    }
    
    .dev-panel h3 {
      font-size: 1.6rem;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .dev-panel-header {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 20px;
      justify-content: center;
    }
    
    .dev-panel-header .btn-add-product {
      flex: 1;
      min-width: 160px;
      padding: 12px 10px;
      font-size: 0.9rem;
      justify-content: center;
    }
    
    .dev-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .dev-tab {
      padding: 10px 20px;
      background: #f0f4fa;
      border: none;
      border-radius: 40px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.95rem;
    }
    
    .dev-tab.active {
      background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
      color: white;
    }
    
    .dev-tab:hover {
      transform: translateY(-2px);
    }
    
    .dev-content {
      display: none;
    }
    
    .dev-content.active {
      display: block;
    }
    
    .user-item {
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border-radius: 20px;
      padding: 15px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      border: 1px solid #ffe4cc;
    }
    
    .user-info {
      flex: 1;
    }
    
    .user-info strong {
      font-size: 1rem;
      color: #0b1e33;
    }
    
    .user-info small {
      color: #666;
      font-size: 0.85rem;
      display: block;
    }
    
    .user-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .btn-block, .btn-unblock, .btn-delete-user {
      padding: 6px 12px;
      border: none;
      border-radius: 40px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-block {
      background: #ffa502;
      color: white;
    }
    
    .btn-unblock {
      background: #2b7fff;
      color: white;
    }
    
    .btn-delete-user {
      background: #ff6b6b;
      color: white;
    }
    
    .btn-block:hover, .btn-unblock:hover, .btn-delete-user:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .blocked-badge {
      background: #ff6b6b;
      color: white;
      padding: 2px 8px;
      border-radius: 40px;
      font-size: 0.7rem;
      margin-left: 8px;
    }
    
    .dev-badge {
      background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
      color: #0b1e33;
      font-size: 0.65rem;
      padding: 2px 6px;
      border-radius: 40px;
      margin-left: 6px;
      font-weight: 600;
      display: inline-block;
    }

    .image-preview {
      width: 100%;
      height: 120px;
      border-radius: 16px;
      margin-top: 8px;
      object-fit: cover;
      border: 2px dashed #2b7fff;
      display: none;
    }
    
    .image-preview.show {
      display: block;
    }

    .modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease, visibility 0.3s ease;
      padding: 15px;
    }
    .modal-overlay.show {
      opacity: 1;
      visibility: visible;
    }

    .modal-card {
      background: white;
      max-width: 450px;
      width: 100%;
      max-height: 90vh;
      border-radius: 30px;
      padding: 25px;
      box-shadow: 0 40px 60px rgba(0,0,0,0.3);
      transform: scale(0.95) translateY(20px);
      transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
      overflow-y: auto;
      position: relative;
      margin: auto;
    }
    .modal-overlay.show .modal-card {
      transform: scale(1) translateY(0);
    }

    .modal-card h2 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: #0b1e33;
      border-left: 5px solid #2b7fff;
      padding-left: 12px;
    }

    .auth-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      background: #f0f4fa;
      padding: 4px;
      border-radius: 60px;
    }
    .auth-tab {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      border-radius: 60px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.95rem;
    }
    .auth-tab.active {
      background: #2b7fff;
      color: white;
      box-shadow: 0 4px 10px rgba(43,127,255,0.3);
    }

    .modal-field {
      margin-bottom: 15px;
    }
    .modal-field label {
      font-weight: 500;
      font-size: 0.85rem;
      color: #4b5563;
      display: block;
      margin-bottom: 4px;
    }
    .modal-field input, .modal-field textarea, .modal-field select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e7ef;
      border-radius: 40px;
      font-size: 0.9rem;
      outline: none;
      transition: all 0.2s;
      background: #f8fafc;
    }
    .modal-field input:focus, .modal-field textarea:focus, .modal-field select:focus {
      border-color: #2b7fff;
      background: white;
      box-shadow: 0 0 0 4px rgba(43,127,255,0.1);
    }
    .modal-field textarea {
      min-height: 70px;
      resize: vertical;
    }
    .modal-field small {
      color: #666;
      font-size: 0.7rem;
      margin-top: 4px;
      display: block;
    }

    .btn-auth {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 60px;
      padding: 14px 0;
      font-weight: 700;
      font-size: 1rem;
      width: 100%;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 8px 18px rgba(102, 126, 234, 0.3);
      margin-top: 10px;
    }
    .btn-auth:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.5);
    }

    .btn-pay {
      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
      color: white;
      border: none;
      border-radius: 60px;
      padding: 14px 0;
      font-weight: 700;
      font-size: 1rem;
      width: 100%;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
    }
    .btn-pay:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4);
    }

    .close-modal {
      background: none;
      border: none;
      font-size: 0.9rem;
      color: #aaa;
      margin-top: 12px;
      width: 100%;
      text-align: center;
      cursor: pointer;
      padding: 8px;
      transition: color 0.2s;
    }
    .close-modal:hover {
      color: #ff6b6b;
    }

    .sosmed-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 15px 0;
    }
    
    .sosmed-card {
      background: #f8f9fa;
      border-radius: 16px;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid #e0e0e0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }
    
    .sosmed-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      background: white;
    }
    
    .sosmed-card.tiktok {
      border-left: 4px solid #000000;
    }
    
    .sosmed-card.tiktok:hover {
      border-left-width: 6px;
    }
    
    .sosmed-card.whatsapp {
      border-left: 4px solid #25D366;
    }
    
    .sosmed-card.whatsapp:hover {
      border-left-width: 6px;
    }
    
    .sosmed-icon {
      width: 45px;
      height: 45px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      background: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    
    .sosmed-card.tiktok .sosmed-icon i {
      color: #000000;
    }
    
    .sosmed-card.whatsapp .sosmed-icon i {
      color: #25D366;
    }
    
    .sosmed-info {
      flex: 1;
    }
    
    .sosmed-info h3 {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 3px;
      color: #0b1e33;
    }
    
    .sosmed-info p {
      font-size: 0.85rem;
      color: #666;
    }
    
    .sosmed-action {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #2b7fff;
      font-size: 0.9rem;
      font-weight: 500;
    }
    
    .sosmed-action span {
      background: #eef4ff;
      padding: 4px 8px;
      border-radius: 40px;
      font-size: 0.8rem;
    }
    
    .sosmed-action i {
      font-size: 1.2rem;
      transition: transform 0.2s ease;
    }
    
    .sosmed-card:hover .sosmed-action i {
      transform: translateX(5px);
    }

    .steps-container {
      margin: 20px 0;
    }
    .step-item {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 15px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 60px;
    }
    .step-number {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.1rem;
      flex-shrink: 0;
    }
    .step-text {
      font-size: 0.95rem;
      color: #1e293b;
    }

    #modalOrderOverlay .modal-card {
      max-width: 400px;
      width: calc(100% - 20px);
      padding: 20px 15px;
    }

    .receipt-compact {
      background: #f8f9fa;
      border-radius: 16px;
      padding: 12px 10px;
      margin-bottom: 15px;
      border: 2px dashed #2b7fff;
      font-size: 0.8rem;
    }

    .receipt-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      gap: 10px;
      flex-wrap: wrap;
    }

    .receipt-label {
      color: #666;
      white-space: nowrap;
    }

    .receipt-value {
      font-weight: 600;
      text-align: right;
      word-break: break-word;
      max-width: 60%;
    }

    .receipt-total {
      border-top: 1px dashed #ccc;
      margin-top: 8px;
      padding-top: 8px;
      display: flex;
      justify-content: space-between;
      font-weight: 700;
    }

    .receipt-total .receipt-value {
      color: #2b7fff;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 768px) {
      .product-grid {
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 20px;
      }
      
      .product-card {
        min-height: 260px;
      }
      
      .empty-grid-message {
        padding: 40px 20px;
        min-height: 250px;
      }
      
      .empty-grid-message i {
        font-size: 3rem;
      }
      
      .empty-grid-message p {
        font-size: 1.1rem;
      }
      
      .profile-banner {
        height: 130px;
      }
      
      .profile-image {
        width: 90px;
        height: 90px;
      }
    }

    @media (max-width: 480px) {
      .app { padding: 0 10px; }
      
      .profile-banner {
        height: 100px;
      }
      
      .profile-avatar-container {
        margin-top: -40px;
      }
      
      .profile-image {
        width: 70px;
        height: 70px;
        border-width: 3px;
      }
      
      .profile-desc {
        padding: 10px 15px 15px 15px;
      }
      
      .product-grid { grid-template-columns: 1fr; gap: 15px; }
      
      .product-card {
        padding: 15px;
        min-height: auto;
      }
      
      .product-footer {
        flex-direction: column;
        gap: 10px;
        align-items: stretch;
      }
      
      .product-price {
        text-align: center;
      }
      
      .btn-order {
        justify-content: center;
      }
      
      .dev-actions {
        justify-content: center;
      }
      
      #loginIndicator span { display: none; }
      #loginIndicator { padding: 8px; border-radius: 50%; }
      
      .sosmed-card {
        padding: 12px 15px;
      }
      
      .sosmed-icon {
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
      }
      
      .sosmed-info h3 {
        font-size: 1rem;
      }
      
      .sosmed-info p {
        font-size: 0.75rem;
      }
      
      .sosmed-action span {
        display: none;
      }
      
      .empty-grid-message {
        padding: 30px 15px;
        min-height: 200px;
      }
      
      .empty-grid-message i {
        font-size: 2.5rem;
        margin-bottom: 15px;
      }
      
      .empty-grid-message p {
        font-size: 1rem;
      }
      
      .empty-grid-message small {
        font-size: 0.85rem;
        padding: 6px 15px;
      }
      
      .section-title {
        margin: 25px 0 10px 0;
        font-size: 1.3rem;
      }
      
      .modal-card {
        padding: 20px 15px;
      }
      
      .modal-field {
        margin-bottom: 12px;
      }
      
      .modal-field input, .modal-field textarea, .modal-field select {
        padding: 10px 14px;
      }
    }
  </style>
</head>
<body>
  <div id="blockedMessage" class="blocked-message" style="display: none;">
    <div class="blocked-card">
      <i class="fas fa-ban"></i>
      <h2>Akses Diblokir</h2>
      <p id="blockedMessageText">Anda diblokir oleh Admin</p>
      <button onclick="location.reload()">Coba Lagi</button>
    </div>
  </div>

  <div class="loading-screen" id="loadingScreen">
    <div class="loading-card">
      <div class="loading-title"><span>VALL</span> STORE</div>
      <div class="loading-animation">
        <div class="loading-bar-container">
          <div class="loading-bar-fill" id="loadingBarFill"></div>
        </div>
        <div class="loading-text" id="loadingText">
          <i class="fas fa-spinner fa-pulse"></i> Sedang Loading
        </div>
        <div class="loading-percent" id="loadingPercent">0%</div>
      </div>
      <div>
        <span class="dot-flash"></span>
        <span class="dot-flash" style="animation-delay: 0.2s;"></span>
        <span class="dot-flash" style="animation-delay: 0.4s;"></span>
      </div>
    </div>
  </div>

  <div class="app" id="mainApp">
    <div class="header-row">
      <button class="menu-btn" id="menuToggle" aria-label="menu">
        <i class="fas fa-bars"></i>
      </button>
      <div class="logo">VALL <span>STORE</span></div>
      <div class="header-right">
        <div id="loginIndicator">
          <i class="fas fa-user-circle"></i>
          <span id="loginIndicatorText">Menu</span>
        </div>
      </div>
    </div>

    <div class="home-profile" id="homeProfileSection">
      <div class="profile-banner"></div>
      <div class="profile-avatar-container">
        <img src="https://files.catbox.moe/1lckzp.jpg" alt="Vall Store Profile" class="profile-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
      </div>
      <div class="profile-desc">
        <h3><i class="fas fa-store"></i> Vall Store</h3>
        <p><i class="fas fa-gamepad"></i> Vall Store melayani berbagai kebutuhan Roblox seperti Akun, Robux, Buah, Joki, Dll <i class="fas fa-rocket"></i></p>
      </div>
    </div>

    <div class="search-container">
      <div class="search-wrapper">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="Cari produk yang anda butuhkan" autocomplete="off">
      </div>
    </div>

    <!-- ===== PRODUK YANG KAMI SEDIAKAN ===== -->
    <div class="section-title">
      üì¶ PRODUK YANG KAMI SEDIAKAN
    </div>
    <div class="product-grid" id="productGrid1">
      <div class="empty-grid-message">
        <i class="fas fa-box-open"></i>
        <p>Belum ada produk tersedia</p>
        <small>Jika Belum Ada Produk Maka Stock Habis</small>
      </div>
    </div>

    <!-- ===== STOCK AKUN KAMI ===== -->
    <div class="section-title" style="margin-top: 30px;">
      üì¶ STOCK AKUN KAMI
    </div>
    <div class="product-grid" id="productGrid2">
      <div class="empty-grid-message" style="border-color: #ffa50250;">
        <i class="fas fa-users" style="color: #ffa502;"></i>
        <p>Belum ada stock akun tersedia</p>
        <small>Jika Belum Ada Produk Maka Stock Habis</small>
      </div>
    </div>

    <!-- ===== PRODUK BEST SELLER KAMI ===== -->
    <div class="section-title" style="margin-top: 30px;">
      üî• PRODUK BEST SELLER KAMI
    </div>
    <div class="product-grid" id="productGrid3">
      <div class="empty-grid-message" style="border-color: #ff6b6b50;">
        <i class="fas fa-fire" style="color: #ff6b6b;"></i>
        <p>Belum ada produk best seller</p>
        <small>Jika Belum Ada Produk Maka Stock Habis</small>
      </div>
    </div>

    <!-- ===== DEV PANEL ===== -->
    <div class="dev-panel" id="devPanel" style="display: none;">
      <h3><i class="fas fa-crown"></i> Dev Panel</h3>
      
      <!-- 3 TOMBOL SEJAJAR -->
      <div class="dev-panel-header">
        <button class="btn-add-product" id="btnAddProductFromDev">
          <i class="fas fa-plus"></i> + Produk
        </button>
        
        <button class="btn-add-product" id="btnAddUserFromDev" style="background: linear-gradient(135deg, #2b7fff, #1e4b8f);">
          <i class="fas fa-user-plus"></i> + User
        </button>
        
        <button class="btn-add-product" id="btnAddCouponFromDev" style="background: linear-gradient(135deg, #f6d365, #fda085);">
          <i class="fas fa-ticket-alt"></i> + Kupon
        </button>
      </div>
      
      <div class="dev-tabs">
        <button class="dev-tab active" data-tab="users">üë• Manajemen User</button>
        <button class="dev-tab" data-tab="products">üì¶ Manajemen Produk</button>
        <button class="dev-tab" data-tab="coupons">üéüÔ∏è Manajemen Kupon</button>
      </div>
      
      <div class="dev-content active" id="devUsersTab">
        <h4 style="margin-bottom: 15px;">Daftar User</h4>
        <div id="userList"></div>
      </div>
      
      <div class="dev-content" id="devProductsTab">
        <h4 style="margin-bottom: 15px;">Daftar Produk</h4>
        <div id="productList"></div>
      </div>
      
      <div class="dev-content" id="devCouponsTab">
        <h4 style="margin-bottom: 15px;">Daftar Kupon</h4>
        <div id="couponList"></div>
      </div>
    </div>
  </div>

  <!-- ========== SIDEBAR ========== -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>Vall Store</h2>
      <button class="close-sidebar" id="closeSidebarBtn"><i class="fas fa-times"></i></button>
    </div>
    
    <div class="sidebar-profile" id="sidebarProfile">
      <div class="profile-icon">
        <i class="fas fa-user-circle"></i>
      </div>
      <div class="profile-name" id="sidebarProfileName">Belum Login</div>
      <div class="profile-email" id="sidebarProfileEmail">-</div>
      <div class="profile-divider">------------------</div>
      <div class="profile-badge" id="sidebarProfileBadge" style="display: none;">Dev Account</div>
    </div>
    
    <ul class="sidebar-menu">
      <li><a id="menuHome"><i class="fas fa-home"></i> Home</a></li>
      <li><a id="menuProduk"><i class="fas fa-box"></i> Produk</a></li>
      <li><a id="menuCaraOrder"><i class="fas fa-shopping-cart"></i> Cara Order</a></li>
      <li><a id="menuSosmed"><i class="fas fa-share-alt"></i> Sosmed Kami</a></li>
      <li><a id="menuLogin"><i class="fas fa-sign-in-alt"></i> Login / Register</a></li>
      <li><a id="menuLogout" style="color: #ff6b6b; display: none;"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
    </ul>
  </aside>

  <!-- ========== MODAL AUTH ========== -->
  <div class="modal-overlay" id="modalAuthOverlay">
    <div class="modal-card">
      <div class="auth-tabs">
        <button class="auth-tab active" id="tabLogin">Masuk</button>
        <button class="auth-tab" id="tabRegister">Daftar</button>
      </div>

      <div id="loginForm">
        <h2>üîê Selamat Datang Kembali</h2>
        <div class="modal-field">
          <label>Email atau Username</label>
          <input type="text" id="loginIdentifier" placeholder="Masukkan email atau username" autocomplete="off">
        </div>
        <div class="modal-field">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="Masukkan password" autocomplete="off">
        </div>
        <button class="btn-auth" id="btnLogin"><i class="fas fa-sign-in-alt"></i> Masuk</button>
      </div>

      <div id="registerForm" style="display: none;">
        <h2>üìù Buat Akun Baru</h2>
        <div class="modal-field">
          <label>Username</label>
          <input type="text" id="regUsername" placeholder="Pilih username" autocomplete="off">
        </div>
        <div class="modal-field">
          <label>Email</label>
          <input type="email" id="regEmail" placeholder="email@domain.com" autocomplete="off">
        </div>
        <div class="modal-field">
          <label>Password</label>
          <input type="password" id="regPassword" placeholder="Minimal 8 karakter" autocomplete="off">
          <small>Gunakan kombinasi huruf dan angka untuk keamanan</small>
        </div>
        <div class="modal-field">
          <label>Konfirmasi Password</label>
          <input type="password" id="regConfirmPassword" placeholder="Masukkan ulang password" autocomplete="off">
        </div>
        <button class="btn-auth" id="btnRegister"><i class="fas fa-user-plus"></i> Daftar</button>
      </div>
      
      <button class="close-modal" id="tutupAuthModal">Tutup</button>
    </div>
  </div>

  <!-- ========== MODAL PRODUCT (TAMBAH / EDIT PRODUK) ========== -->
  <div class="modal-overlay" id="modalProductOverlay">
    <div class="modal-card">
      <h2 id="productModalTitle">üì¶ Tambah Produk</h2>
      
      <div class="modal-field">
        <label>Nama Produk <span style="color: #ff6b6b;">*</span></label>
        <input type="text" id="productName" placeholder="Contoh: Akun Level Max" maxlength="100">
      </div>
      
      <div class="modal-field">
        <label>Deskripsi <span style="color: #ff6b6b;">*</span></label>
        <textarea id="productDesc" rows="2" placeholder="Rank aman & cepat, push rank garansi"></textarea>
      </div>
      
      <div class="modal-field">
        <label>Harga (Rp) <span style="color: #ff6b6b;">*</span></label>
        <input type="number" id="productPrice" placeholder="25000" min="0">
      </div>
      
      <div class="modal-field">
        <label>Kategori <span style="color: #ff6b6b;">*</span></label>
        <select id="productCategory">
          <option value="1">üì¶ Produk Yang Kami Sediakan</option>
          <option value="2">üë• Stock Akun Kami</option>
          <option value="3">üî• Best Seller Kami</option>
        </select>
      </div>
      
      <div class="modal-field">
        <label>Link Gambar (opsional)</label>
        <input type="url" id="productImage" placeholder="https://example.com/gambar.jpg" onchange="previewImage(this.value)">
        <small>Kosongkan jika tidak ingin menampilkan gambar</small>
        <img class="image-preview" id="imagePreview" src="#" alt="Preview">
      </div>
      
      <div class="modal-field">
        <label>Nomor WhatsApp Admin</label>
        <input type="text" id="productWA" placeholder="‚Äî" value="‚Äî">
        <small>Contoh: 628xxxx (tanpa + dan spasi)</small>
      </div>
      
      <button class="btn-auth" id="btnSaveProduct"><i class="fas fa-save"></i> Simpan Produk</button>
      <button class="close-modal" id="tutupProductModal">Batal</button>
    </div>
  </div>

  <!-- ========== MODAL COUPON ========== -->
  <div class="modal-overlay" id="modalCouponOverlay">
    <div class="modal-card" style="max-width: 400px;">
      <h2 id="couponModalTitle" style="font-size: 1.3rem; margin-bottom: 15px;">üéüÔ∏è Buat Kupon Baru</h2>
      
      <div class="modal-field">
        <label style="font-size: 0.9rem; font-weight: 500;">Kode Kupon <span style="color: #ff6b6b;">*</span></label>
        <input type="text" id="couponCode" placeholder="Contoh: VALLKUPON" maxlength="20" style="padding: 10px 12px; font-size: 0.9rem;">
        <small style="font-size: 0.7rem;">Gunakan huruf besar, tanpa spasi</small>
      </div>
      
      <div class="modal-field">
        <label style="font-size: 0.9rem; font-weight: 500;">Deskripsi</label>
        <input type="text" id="couponDesc" placeholder="Contoh: Diskon 10%" style="padding: 10px 12px; font-size: 0.9rem;">
      </div>
      
      <div class="modal-field">
        <label style="font-size: 0.9rem; font-weight: 500;">Diskon (%) <span style="color: #ff6b6b;">*</span></label>
        <input type="number" id="couponPercentage" placeholder="10" min="1" max="100" style="padding: 10px 12px; font-size: 0.9rem;">
      </div>
      
      <div class="modal-field">
        <label style="font-size: 0.9rem; font-weight: 500;">Berlaku Selama <span style="color: #ff6b6b;">*</span></label>
        <select id="couponExpiryDays" style="padding: 10px 12px; font-size: 0.9rem;">
          <option value="1">1 Hari</option>
          <option value="2">2 Hari</option>
          <option value="3">3 Hari</option>
          <option value="5">5 Hari</option>
          <option value="7" selected>7 Hari</option>
          <option value="14">14 Hari</option>
          <option value="30">30 Hari</option>
        </select>
        <small style="font-size: 0.7rem;">Kupon akan kadaluarsa setelah jumlah hari yang dipilih</small>
      </div>
      
      <div class="modal-field">
        <label style="font-size: 0.9rem; font-weight: 500;">Maksimal Pemakaian</label>
        <input type="number" id="couponMaxUses" placeholder="100" min="1" value="100" style="padding: 10px 12px; font-size: 0.9rem;">
      </div>
      
      <button class="btn-auth" id="btnSaveCoupon" style="padding: 12px; font-size: 0.95rem;">
        <i class="fas fa-save"></i> Simpan Kupon
      </button>
      <button class="close-modal" id="tutupCouponModal" style="font-size: 0.85rem; padding: 8px;">Batal</button>
    </div>
  </div>

  <!-- ========== MODAL ORDER - DENGAN VALIDASI ========== -->
  <div class="modal-overlay" id="modalOrderOverlay">
    <div class="modal-card">
      <h2 style="font-size: 1.3rem; margin-bottom: 15px;">üìã Form Pemesanan</h2>
      
      <!-- RECEIPT COMPACT -->
      <div class="receipt-compact">
        <div class="receipt-row">
          <span class="receipt-label">No Pesanan:</span>
          <span class="receipt-value" id="rcNo" style="color: #2b7fff;">#185</span>
        </div>
        <div class="receipt-row">
          <span class="receipt-label">Produk:</span>
          <span class="receipt-value" id="rcProduk">-</span>
        </div>
        <div class="receipt-row">
          <span class="receipt-label">Harga:</span>
          <span class="receipt-value" id="rcHargaAwal">Rp 0</span>
        </div>
        <div class="receipt-row" style="display: none; color: #25D366;" id="diskonRow">
          <span class="receipt-label">Diskon:</span>
          <span class="receipt-value" id="rcDiskon">Rp 0</span>
        </div>
        <div class="receipt-total">
          <span>Total:</span>
          <span class="receipt-value" id="rcTotal">Rp 0</span>
        </div>
      </div>

      <!-- INPUT FIELDS - WAJIB DIISI -->
      <div class="modal-field">
        <label>Nama Lengkap <span style="color: #ff6b6b;">*</span></label>
        <input type="text" id="namaInput" placeholder="Contoh: Budi Santoso" autocomplete="off">
        <small style="color: #666;">Wajib diisi</small>
      </div>
      
      <div class="modal-field">
        <label>Username Game <span style="color: #ff6b6b;">*</span></label>
        <input type="text" id="usernameInput" placeholder="Contoh: budi_roblox123" autocomplete="off">
        <small style="color: #666;">Wajib diisi</small>
      </div>

      <!-- KODE PROMO (Opsional) -->
      <div style="margin: 15px 0;">
        <label style="font-size: 0.85rem; font-weight: 500; color: #4b5563; display: block; margin-bottom: 4px;">
          <i class="fas fa-ticket-alt"></i> Kode Promo (Opsional)
        </label>
        <div style="display: flex; gap: 6px;">
          <input type="text" id="couponInput" placeholder="Masukkan kode promo" style="flex: 1; padding: 10px 12px; border: 2px solid #e0e7ef; border-radius: 40px; font-size: 0.85rem; outline: none;">
          <button id="applyCouponBtn" style="background: #f6d365; border: none; border-radius: 40px; padding: 0 15px; font-weight: 600; font-size: 0.85rem; cursor: pointer;">Pakai</button>
        </div>
        <small id="couponMessage" style="color: #666; display: block; margin-top: 4px;"></small>
      </div>

      <!-- BUTTONS -->
      <button class="btn-pay" id="bayarSekarangBtn" style="opacity: 0.5; cursor: not-allowed;" disabled>
        <i class="fab fa-whatsapp"></i> Bayar Sekarang Juga
      </button>
      <button class="close-modal" id="tutupModalBtn">Tutup</button>
    </div>
  </div>

  <!-- ========== MODAL CARA ORDER ========== -->
  <div class="modal-overlay" id="modalCaraOrderOverlay">
    <div class="modal-card">
      <h2>üõí Cara Membeli</h2>
      <div class="steps-container">
        <div class="step-item"><div class="step-number">1</div><div class="step-text">Pilih produk yang kamu inginkan</div></div>
        <div class="step-item"><div class="step-number">2</div><div class="step-text">Klik Pesan Sekarang</div></div>
        <div class="step-item"><div class="step-number">3</div><div class="step-text">Isi formulir dengan lengkap</div></div>
        <div class="step-item"><div class="step-number">4</div><div class="step-text">Masukkan kode promo (jika ada)</div></div>
        <div class="step-item"><div class="step-number">5</div><div class="step-text">Klik Pesan via WhatsApp</div></div>
        <div class="step-item"><div class="step-number">6</div><div class="step-text">Tunggu respon admin via WhatsApp</div></div>
      </div>
      <button class="close-modal" id="tutupCaraOrderBtn">Tutup</button>
    </div>
  </div>

  <!-- ========== MODAL SOSMED ========== -->
  <div class="modal-overlay" id="modalSosmedOverlay">
    <div class="modal-card">
      <h2><i class="fas fa-share-alt"></i> Sosmed Kami</h2>
      
      <div class="sosmed-container">
        <div class="sosmed-card tiktok" id="tiktokCard">
          <div class="sosmed-icon">
            <i class="fab fa-tiktok"></i>
          </div>
          <div class="sosmed-info">
            <h3>TikTok</h3>
            <p>@vall9132</p>
          </div>
          <div class="sosmed-action">
            <span>Kunjungi</span>
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
        
        <div class="sosmed-card whatsapp" id="waGroupCard">
          <div class="sosmed-icon">
            <i class="fab fa-whatsapp"></i>
          </div>
          <div class="sosmed-info">
            <h3>Grup WhatsApp</h3>
            <p>BLOX FRUIT BY VALL üîº</p>
          </div>
          <div class="sosmed-action">
            <span>Gabung</span>
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>

        <!-- SALURAN TESTIMONI VALL STORE -->
        <div class="sosmed-card whatsapp" id="waChannelCard" style="border-left-color: #25D366;">
          <div class="sosmed-icon">
            <i class="fab fa-whatsapp"></i>
          </div>
          <div class="sosmed-info">
            <h3>Saluran Testimoni Vall Store</h3>
            <p>üì¢ Lihat testimoni pelanggan</p>
          </div>
          <div class="sosmed-action">
            <span>Lihat</span>
            <i class="fas fa-arrow-right"></i>
          </div>
        </div>
      </div>
      
      <button class="close-modal" id="tutupSosmedModal">Tutup</button>
    </div>
  </div>

  <footer>¬© 2026 Vall Store ‚Äî Game Shop Terbaik</footer>

  <script>
    (function() {
      const DEV_EMAIL = "vallstore.dev.official@gmail.com";
      const DEV_PASSWORD = "VallStore2025!@#";
      const DEFAULT_WA = "ISI NOMOR ADMIN";
      const TIKTOK_URL = "https://www.tiktok.com/@vall9132";
      const WA_GROUP_URL = "https://chat.whatsapp.com/Hb590rFmSmY0oBHq8wN16w?mode=gi_t";
      const WA_CHANNEL_URL = "https://whatsapp.com/channel/0029Vb6vIp0IXnlvcUNvbc0R";

      function secureHash(str) {
        let hash = 0;
        const salt = "VALL_STORE_SALT_2025";
        const saltedStr = str + salt;
        
        for (let i = 0; i < saltedStr.length; i++) {
          const char = saltedStr.charCodeAt(i);
          hash = ((hash << 7) - hash) + char;
          hash = hash & hash;
        }
        
        hash = Math.abs(hash ^ (hash >>> 16));
        
        return 'v2_' + Math.abs(hash).toString(36) + '_' + btoa(str.length.toString());
      }

      function showBlockedMessage(message) {
        document.getElementById('mainApp').style.display = 'none';
        document.getElementById('blockedMessage').style.display = 'flex';
        document.getElementById('blockedMessageText').innerText = message;
      }

      let users = [];
      try {
        const savedUsers = localStorage.getItem('vallstore_users_v2');
        if (savedUsers) {
          users = JSON.parse(savedUsers);
        } else {
          users = [];
        }
      } catch (e) {
        console.error('Error loading users:', e);
        users = [];
      }

      let products = [];
      try {
        const savedProducts = localStorage.getItem('vallstore_products_v2');
        if (savedProducts) {
          products = JSON.parse(savedProducts);
        } else {
          products = [];
          localStorage.setItem('vallstore_products_v2', JSON.stringify(products));
        }
      } catch (e) {
        console.error('Error loading products:', e);
        products = [];
      }

      let coupons = [];
      try {
        const savedCoupons = localStorage.getItem('vallstore_coupons_v2');
        if (savedCoupons) {
          coupons = JSON.parse(savedCoupons);
        } else {
          coupons = [];
        }
      } catch (e) {
        console.error('Error loading coupons:', e);
        coupons = [];
      }

      let orderCounter = 185;
      try {
        const savedCounter = localStorage.getItem('vallstore_order_counter_v2');
        if (savedCounter) {
          orderCounter = parseInt(savedCounter);
        } else {
          localStorage.setItem('vallstore_order_counter_v2', '185');
        }
      } catch (e) {
        console.error('Error loading order counter:', e);
        orderCounter = 185;
      }

      const createDevAccount = () => {
        try {
          const devExists = users.find(u => u.email === DEV_EMAIL);
          if (!devExists) {
            const hashedPassword = secureHash(DEV_PASSWORD);
            const devUser = {
              id: Date.now() - 1000,
              username: 'VallStoreDev',
              email: DEV_EMAIL,
              passwordHash: hashedPassword,
              createdAt: new Date().toISOString(),
              isDev: true,
              isBlocked: false,
              isDeleted: false
            };
            users.push(devUser);
            localStorage.setItem('vallstore_users_v2', JSON.stringify(users));
            console.log('‚úÖ Dev account created successfully');
          }
        } catch (error) {
          console.error('Error creating dev account:', error);
        }
      };
      createDevAccount();

      let currentUser = null;
      try {
        const savedUser = localStorage.getItem('currentUser_v2');
        if (savedUser) {
          currentUser = JSON.parse(savedUser);
          
          const userData = users.find(u => u.email === currentUser.email);
          if (userData) {
            if (userData.isDeleted) {
              showBlockedMessage('Akun sudah dihapus oleh Admin');
              currentUser = null;
              localStorage.removeItem('currentUser_v2');
            } else if (userData.isBlocked) {
              showBlockedMessage('Anda diblokir oleh Admin');
              currentUser = null;
              localStorage.removeItem('currentUser_v2');
            }
          } else {
            currentUser = null;
            localStorage.removeItem('currentUser_v2');
          }
        }
      } catch (e) {
        console.error('Error loading current user:', e);
        currentUser = null;
      }

      let selectedProduct = { name: '', price: 0, waNumber: DEFAULT_WA };
      let appliedCoupon = null;
      let originalPrice = 0;

      // ===========================================
      // CEK FORM PESANAN - WAJIB DIISI
      // ===========================================
      function checkOrderForm() {
        const nama = document.getElementById('namaInput')?.value.trim() || '';
        const username = document.getElementById('usernameInput')?.value.trim() || '';
        const bayarBtn = document.getElementById('bayarSekarangBtn');
        
        if (nama !== '' && username !== '') {
          bayarBtn.disabled = false;
          bayarBtn.style.opacity = '1';
          bayarBtn.style.cursor = 'pointer';
        } else {
          bayarBtn.disabled = true;
          bayarBtn.style.opacity = '0.5';
          bayarBtn.style.cursor = 'not-allowed';
        }
      }

      function renderProductsByCategory(categoryId, gridId) {
        const grid = document.getElementById(gridId);
        if (!grid) return;
        
        const categoryProducts = products.filter(p => p.category === categoryId);
        
        if (categoryProducts.length === 0) {
          let iconClass = 'fa-box-open';
          let iconColor = '#2b7fff';
          
          if (categoryId === 2) {
            iconClass = 'fa-users';
            iconColor = '#ffa502';
          } else if (categoryId === 3) {
            iconClass = 'fa-fire';
            iconColor = '#ff6b6b';
          }
          
          grid.innerHTML = `
            <div class="empty-grid-message">
              <i class="fas ${iconClass}" style="color: ${iconColor};"></i>
              <p>Belum ada produk tersedia</p>
              <small>Jika Belum Ada Produk Maka Stock Habis</small>
            </div>
          `;
          return;
        }
        
        let html = '';
        categoryProducts.forEach(product => {
          let imageHtml = '';
          if (product.image && product.image.trim() !== '') {
            imageHtml = `<img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.style.display='none';">`;
          }
          
          html += `
            <div class="product-card">
              ${imageHtml}
              <div class="product-name">${product.name}</div>
              <div class="product-desc">${product.description}</div>
              <div class="product-footer">
                <span class="product-price">Rp ${product.price.toLocaleString('id-ID')}</span>
                <button class="btn-order" data-product-id="${product.id}">
                  <i class="fab fa-whatsapp"></i> Pesan
                </button>
              </div>
              ${currentUser && currentUser.isDev ? `
              <div class="dev-actions">
                <button class="btn-edit-product" data-product-id="${product.id}"><i class="fas fa-edit"></i> Edit</button>
                <button class="btn-delete-product" data-product-id="${product.id}"><i class="fas fa-trash"></i> Hapus</button>
              </div>
              ` : ''}
            </div>
          `;
        });
        
        grid.innerHTML = html;
        
        attachOrderButtons();
        if (currentUser && currentUser.isDev) {
          attachDevProductButtons();
        }
      }

      function attachOrderButtons() {
        document.querySelectorAll('.btn-order').forEach(btn => {
          btn.removeEventListener('click', handleOrderClick);
          btn.addEventListener('click', handleOrderClick);
        });
      }

      function handleOrderClick(e) {
        const btn = e.currentTarget;
        const productId = btn.dataset.productId;
        const product = products.find(p => p.id == productId);
        
        if (!product) {
          alert('Produk tidak ditemukan!');
          return;
        }
        
        selectedProduct = {
          name: product.name,
          price: product.price,
          waNumber: product.waNumber || DEFAULT_WA
        };
        
        originalPrice = product.price;
        
        document.getElementById('rcNo').innerText = '#' + orderCounter;
        document.getElementById('rcProduk').innerText = product.name.length > 20 ? product.name.substring(0, 20) + '...' : product.name;
        document.getElementById('rcHargaAwal').innerText = `Rp ${product.price.toLocaleString('id-ID')}`;
        document.getElementById('rcTotal').innerText = `Rp ${product.price.toLocaleString('id-ID')}`;
        
        appliedCoupon = null;
        document.getElementById('diskonRow').style.display = 'none';
        document.getElementById('couponInput').value = '';
        document.getElementById('couponMessage').innerText = '';
        
        // ===== RESET FORM DAN NONAKTIFKAN TOMBOL =====
        document.getElementById('namaInput').value = '';
        document.getElementById('usernameInput').value = '';
        
        const bayarBtn = document.getElementById('bayarSekarangBtn');
        bayarBtn.disabled = true;
        bayarBtn.style.opacity = '0.5';
        bayarBtn.style.cursor = 'not-allowed';
        
        // Reset border color
        document.getElementById('namaInput').style.borderColor = '#e0e7ef';
        document.getElementById('usernameInput').style.borderColor = '#e0e7ef';
        // ===== END RESET =====
        
        document.getElementById('modalOrderOverlay').classList.add('show');
      }

      function attachDevProductButtons() {
        document.querySelectorAll('.btn-edit-product').forEach(btn => {
          btn.removeEventListener('click', handleEditClick);
          btn.addEventListener('click', handleEditClick);
        });
        
        document.querySelectorAll('.btn-delete-product').forEach(btn => {
          btn.removeEventListener('click', handleDeleteClick);
          btn.addEventListener('click', handleDeleteClick);
        });
      }

      function handleEditClick(e) {
        if (!currentUser || !currentUser.isDev) {
          alert('Hanya Dev yang bisa mengedit produk!');
          return;
        }
        
        const productId = e.currentTarget.dataset.productId;
        const product = products.find(p => p.id == productId);
        
        if (!product) return;
        
        document.getElementById('productModalTitle').innerText = '‚úèÔ∏è Edit Produk';
        document.getElementById('productName').value = product.name;
        document.getElementById('productDesc').value = product.description;
        document.getElementById('productPrice').value = product.price;
        document.getElementById('productImage').value = product.image || '';
        document.getElementById('productWA').value = product.waNumber || DEFAULT_WA;
        document.getElementById('productCategory').value = product.category;
        
        const preview = document.getElementById('imagePreview');
        if (product.image && product.image.trim() !== '') {
          preview.src = product.image;
          preview.classList.add('show');
        } else {
          preview.classList.remove('show');
        }
        
        document.getElementById('btnSaveProduct').dataset.editId = productId;
        document.getElementById('modalProductOverlay').classList.add('show');
      }

      function handleDeleteClick(e) {
        if (!currentUser || !currentUser.isDev) {
          alert('Hanya Dev yang bisa menghapus produk!');
          return;
        }
        
        if (!confirm('Yakin ingin menghapus produk ini?')) return;
        
        const productId = e.currentTarget.dataset.productId;
        products = products.filter(p => p.id != productId);
        localStorage.setItem('vallstore_products_v2', JSON.stringify(products));
        
        renderAllProducts();
        renderProductList();
      }

      function renderAllProducts() {
        renderProductsByCategory(1, 'productGrid1');
        renderProductsByCategory(2, 'productGrid2');
        renderProductsByCategory(3, 'productGrid3');
      }

      function renderUserList() {
        const userList = document.getElementById('userList');
        const activeUsers = users.filter(u => !u.isDeleted);
        
        if (activeUsers.length === 0) {
          userList.innerHTML = '<p style="text-align: center; padding: 20px;">Belum ada user terdaftar</p>';
          return;
        }
        
        userList.innerHTML = activeUsers.map(u => `
            <div class="user-item">
              <div class="user-info">
                <strong>${u.username} ${u.isDev ? '<span class="dev-badge">DEV</span>' : ''}</strong>
                ${u.isBlocked ? '<span class="blocked-badge">Diblokir</span>' : ''}
                <small>${u.email}</small>
              </div>
              <div class="user-actions">
                ${u.isDev ? '' : `
                  ${u.isBlocked ? 
                    `<button class="btn-unblock" onclick="window.toggleBlockUser('${u.email}', false)"><i class="fas fa-check"></i> Buka Blokir</button>` :
                    `<button class="btn-block" onclick="window.toggleBlockUser('${u.email}', true)"><i class="fas fa-ban"></i> Blokir</button>`
                  }
                  <button class="btn-delete-user" onclick="window.deleteUser('${u.email}')">
                    <i class="fas fa-trash"></i> Hapus
                  </button>
                `}
              </div>
            </div>
          `).join('');
      }

      function renderProductList() {
        const productList = document.getElementById('productList');
        if (!products || products.length === 0) {
          productList.innerHTML = '<p style="text-align: center; padding: 20px;">Belum ada produk</p>';
          return;
        }
        
        const sortedProducts = [...products].sort((a, b) => b.id - a.id);
        
        productList.innerHTML = sortedProducts.map(p => {
          const categoryNames = ['', 'Produk Kami', 'Stock Akun', 'Best Seller'];
          return `
            <div class="user-item" style="border-left: 4px solid #2b7fff;">
              <div class="user-info">
                <div style="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;">
                  <strong>${p.name}</strong>
                  <span style="background: #eef4ff; padding: 2px 8px; border-radius: 40px; font-size: 0.7rem;">${categoryNames[p.category]}</span>
                  <span style="background: #f6d365; padding: 2px 8px; border-radius: 40px; font-size: 0.7rem;">Rp ${p.price.toLocaleString('id-ID')}</span>
                </div>
                <small>${p.description.substring(0, 50)}${p.description.length > 50 ? '...' : ''}</small><br>
                <small>üì∑ ${p.image ? 'Ada gambar' : 'Tanpa gambar'}</small>
              </div>
              <div class="user-actions">
                <button class="btn-edit-product" onclick="window.editProductFromPanel(${p.id})">
                  <i class="fas fa-edit"></i> Edit
                </button>
                <button class="btn-delete-user" onclick="window.deleteProduct(${p.id})">
                  <i class="fas fa-trash"></i> Hapus
                </button>
              </div>
            </div>
          `;
        }).join('');
      }

      function renderCouponList() {
        const couponList = document.getElementById('couponList');
        if (!coupons || coupons.length === 0) {
          couponList.innerHTML = '<p style="text-align: center; padding: 20px;">Belum ada kupon</p>';
          return;
        }
        
        const sortedCoupons = [...coupons].sort((a, b) => b.id - a.id);
        
        couponList.innerHTML = sortedCoupons.map(c => {
          const isExpired = new Date(c.expiresAt) < new Date();
          const usageLeft = c.maxUses - c.usedCount;
          const isActive = c.isActive && !isExpired && usageLeft > 0;
          
          const now = new Date();
          const expDate = new Date(c.expiresAt);
          const daysLeft = Math.ceil((expDate - now) / (1000 * 60 * 60 * 24));
          
          return `
            <div class="coupon-card-vall">
              <div class="coupon-left-vall">
                <div class="coupon-code-vall">${c.code}</div>
                <div class="coupon-value-vall">${c.discount}</div>
              </div>
              <div class="coupon-right-vall">
                <div class="coupon-desc-vall">${c.description || 'Diskon ' + c.discount + '%'}</div>
                <div class="coupon-stats-vall">
                  <span><i class="fas fa-users"></i> ${c.usedCount}/${c.maxUses}</span>
                  <span><i class="fas fa-hourglass-half"></i> ${daysLeft > 0 ? daysLeft + ' hari' : 'Expired'}</span>
                </div>
                <div class="coupon-expiry-vall">
                  <i class="far fa-calendar-alt"></i> ${new Date(c.expiresAt).toLocaleDateString('id-ID')}
                </div>
                <div>
                  <span class="coupon-status-vall ${isActive ? 'active' : 'expired'}">
                    <i class="fas fa-${isActive ? 'check-circle' : 'times-circle'}"></i>
                    ${isActive ? 'AKTIF' : 'TIDAK AKTIF'}
                  </span>
                </div>
                <div class="coupon-actions-vall">
                  <button class="btn-coupon-vall edit" onclick="window.editCoupon('${c.id}')"><i class="fas fa-edit"></i> Edit</button>
                  <button class="btn-coupon-vall delete" onclick="window.deleteCoupon('${c.id}')"><i class="fas fa-trash"></i> Hapus</button>
                </div>
              </div>
            </div>
          `;
        }).join('');
      }

      function updateSidebarProfile() {
        const profileName = document.getElementById('sidebarProfileName');
        const profileEmail = document.getElementById('sidebarProfileEmail');
        const profileBadge = document.getElementById('sidebarProfileBadge');
        const loginMenuItem = document.getElementById('menuLogin');
        const logoutMenuItem = document.getElementById('menuLogout');
        
        if (currentUser) {
          profileName.innerText = currentUser.username;
          profileEmail.innerText = currentUser.email;
          
          if (currentUser.isDev) {
            profileBadge.style.display = 'inline-block';
            profileBadge.innerText = 'Dev Account';
          } else {
            profileBadge.style.display = 'none';
          }
          
          loginMenuItem.style.display = 'none';
          logoutMenuItem.style.display = 'block';
        } else {
          profileName.innerText = 'Belum Login';
          profileEmail.innerText = '-';
          profileBadge.style.display = 'none';
          
          loginMenuItem.style.display = 'block';
          logoutMenuItem.style.display = 'none';
        }
      }

      function updateDevPanel() {
        if (currentUser && currentUser.isDev) {
          document.getElementById('devPanel').style.display = 'block';
          renderUserList();
          renderProductList();
          renderCouponList();
        } else {
          document.getElementById('devPanel').style.display = 'none';
        }
      }

      function updateUI() {
        renderAllProducts();
        updateSidebarProfile();
        updateDevPanel();
      }

      function validateAndApplyCoupon(code) {
        const couponMessage = document.getElementById('couponMessage');
        const diskonRow = document.getElementById('diskonRow');
        const rcDiskon = document.getElementById('rcDiskon');
        const rcTotal = document.getElementById('rcTotal');
        const rcHargaAwal = document.getElementById('rcHargaAwal');
        
        couponMessage.style.color = '#666';
        
        if (!code || code.trim() === '') {
          couponMessage.innerText = '';
          appliedCoupon = null;
          diskonRow.style.display = 'none';
          rcTotal.innerText = rcHargaAwal.innerText;
          return false;
        }
        
        const coupon = coupons.find(c => 
          c.code.toUpperCase() === code.trim().toUpperCase() && 
          c.isActive === true
        );
        
        if (!coupon) {
          couponMessage.innerText = '‚ùå Kode promo tidak ditemukan!';
          couponMessage.style.color = '#ff6b6b';
          appliedCoupon = null;
          diskonRow.style.display = 'none';
          rcTotal.innerText = rcHargaAwal.innerText;
          return false;
        }
        
        if (new Date(coupon.expiresAt) < new Date()) {
          alert('‚õî KUPON SUDAH EXPIRED!');
          couponMessage.innerText = '‚ùå Kode promo sudah kadaluarsa!';
          couponMessage.style.color = '#ff6b6b';
          appliedCoupon = null;
          diskonRow.style.display = 'none';
          rcTotal.innerText = rcHargaAwal.innerText;
          return false;
        }
        
        if (coupon.usedCount >= coupon.maxUses) {
          alert('‚õî KUPON SUDAH HABIS MASA BERLAKUNYA!');
          couponMessage.innerText = '‚ùå Kode promo sudah habis masa berlakunya!';
          couponMessage.style.color = '#ff6b6b';
          appliedCoupon = null;
          diskonRow.style.display = 'none';
          rcTotal.innerText = rcHargaAwal.innerText;
          return false;
        }
        
        const diskon = Math.floor(originalPrice * (coupon.discount / 100));
        const totalAfterDiskon = Math.max(0, originalPrice - diskon);
        
        appliedCoupon = coupon;
        
        diskonRow.style.display = 'flex';
        rcDiskon.innerText = `Rp ${diskon.toLocaleString('id-ID')} (${coupon.discount}%)`;
        rcTotal.innerText = `Rp ${totalAfterDiskon.toLocaleString('id-ID')}`;
        
        couponMessage.innerHTML = `‚úÖ Kode berhasil! Potongan ${coupon.discount}%`;
        couponMessage.style.color = '#25D366';
        
        return true;
      }

      window.toggleBlockUser = function(email, block) {
        const userIndex = users.findIndex(u => u.email === email);
        if (userIndex !== -1) {
          users[userIndex].isBlocked = block;
          localStorage.setItem('vallstore_users_v2', JSON.stringify(users));
          
          if (currentUser && currentUser.email === email && block) {
            currentUser = null;
            localStorage.removeItem('currentUser_v2');
            showBlockedMessage('Anda diblokir oleh Admin');
            updateUI();
          }
          
          renderUserList();
        }
      };

      window.deleteUser = function(email) {
        if (!confirm('Yakin ingin menghapus user ini?')) return;
        
        const userIndex = users.findIndex(u => u.email === email);
        if (userIndex !== -1) {
          users[userIndex].isDeleted = true;
          localStorage.setItem('vallstore_users_v2', JSON.stringify(users));
          
          if (currentUser && currentUser.email === email) {
            currentUser = null;
            localStorage.removeItem('currentUser_v2');
            showBlockedMessage('Akun sudah dihapus oleh Admin');
            updateUI();
          }
          
          renderUserList();
        }
      };

      window.previewImage = function(url) {
        const preview = document.getElementById('imagePreview');
        if (url && url.trim() !== '') {
          preview.src = url;
          preview.classList.add('show');
        } else {
          preview.classList.remove('show');
          preview.src = '#';
        }
      };

      window.editProductFromPanel = function(productId) {
        if (!currentUser || !currentUser.isDev) {
          alert('Hanya Dev yang bisa mengedit produk!');
          return;
        }
        
        const product = products.find(p => p.id == productId);
        if (!product) return;
        
        document.getElementById('productModalTitle').innerText = '‚úèÔ∏è Edit Produk';
        document.getElementById('productName').value = product.name;
        document.getElementById('productDesc').value = product.description;
        document.getElementById('productPrice').value = product.price;
        document.getElementById('productImage').value = product.image || '';
        document.getElementById('productWA').value = product.waNumber || DEFAULT_WA;
        document.getElementById('productCategory').value = product.category;
        
        const preview = document.getElementById('imagePreview');
        if (product.image && product.image.trim() !== '') {
          preview.src = product.image;
          preview.classList.add('show');
        } else {
          preview.classList.remove('show');
        }
        
        document.getElementById('btnSaveProduct').dataset.editId = productId;
        document.getElementById('modalProductOverlay').classList.add('show');
      };

      window.deleteProduct = function(productId) {
        if (!currentUser || !currentUser.isDev) {
          alert('Hanya Dev yang bisa menghapus produk!');
          return;
        }
        
        if (!confirm('Yakin ingin menghapus produk ini?')) return;
        products = products.filter(p => p.id != productId);
        localStorage.setItem('vallstore_products_v2', JSON.stringify(products));
        renderAllProducts();
        renderProductList();
      };

      window.editCoupon = function(couponId) {
        const coupon = coupons.find(c => c.id == couponId);
        if (coupon) {
          document.getElementById('couponModalTitle').innerText = '‚úèÔ∏è Edit Kupon';
          document.getElementById('couponCode').value = coupon.code;
          document.getElementById('couponDesc').value = coupon.description || '';
          document.getElementById('couponPercentage').value = coupon.discount;
          
          const now = new Date();
          const expDate = new Date(coupon.expiresAt);
          const diffDays = Math.round((expDate - now) / (1000 * 60 * 60 * 24));
          document.getElementById('couponExpiryDays').value = diffDays > 0 ? diffDays : 7;
          
          document.getElementById('couponMaxUses').value = coupon.maxUses;
          document.getElementById('btnSaveCoupon').dataset.couponId = couponId;
          document.getElementById('modalCouponOverlay').classList.add('show');
        }
      };

      window.toggleCouponStatus = function(couponId) {
        const index = coupons.findIndex(c => c.id == couponId);
        if (index !== -1) {
          coupons[index].isActive = !coupons[index].isActive;
          localStorage.setItem('vallstore_coupons_v2', JSON.stringify(coupons));
          renderCouponList();
        }
      };

      window.deleteCoupon = function(couponId) {
        if (!confirm('Yakin ingin menghapus kupon ini?')) return;
        coupons = coupons.filter(c => c.id != couponId);
        localStorage.setItem('vallstore_coupons_v2', JSON.stringify(coupons));
        renderCouponList();
      };

      // ===========================================
      // TOMBOL TAMBAH PRODUK (DARI DEV PANEL)
      // ===========================================
      function setupAddProductButtons() {
        const btnAdd = document.getElementById('btnAddProductFromDev');
        if (!btnAdd) return;
        
        btnAdd.onclick = function(e) {
          e.preventDefault();
          
          if (!currentUser || !currentUser.isDev) {
            alert('üîí Fitur ini hanya untuk Dev!\n\nSilakan login dengan akun Dev:\nEmail: ' + DEV_EMAIL);
            return;
          }
          
          document.getElementById('productModalTitle').innerText = '‚ûï Tambah Produk Baru';
          document.getElementById('productName').value = '';
          document.getElementById('productDesc').value = '';
          document.getElementById('productPrice').value = '';
          document.getElementById('productImage').value = '';
          document.getElementById('productWA').value = DEFAULT_WA;
          document.getElementById('productCategory').value = 1;
          
          document.getElementById('imagePreview').classList.remove('show');
          document.getElementById('btnSaveProduct').dataset.editId = '';
          
          document.getElementById('modalProductOverlay').classList.add('show');
        };
      }

      // ===========================================
      // TOMBOL TAMBAH USER (DARI DEV PANEL)
      // ===========================================
      function setupAddUserButton() {
        const btnAdd = document.getElementById('btnAddUserFromDev');
        if (!btnAdd) return;
        
        btnAdd.onclick = function(e) {
          e.preventDefault();
          
          if (!currentUser || !currentUser.isDev) {
            alert('üîí Fitur ini hanya untuk Dev!');
            return;
          }
          
          // Buka modal register
          document.getElementById('tabRegister').click();
          document.getElementById('modalAuthOverlay').classList.add('show');
        };
      }

      // ===========================================
      // TOMBOL TAMBAH KUPON (DARI DEV PANEL)
      // ===========================================
      function setupAddCouponFromDevButton() {
        const btnAdd = document.getElementById('btnAddCouponFromDev');
        if (!btnAdd) return;
        
        btnAdd.onclick = function(e) {
          e.preventDefault();
          
          if (!currentUser || !currentUser.isDev) {
            alert('üîí Fitur ini hanya untuk Dev!');
            return;
          }
          
          // Buka modal kupon
          document.getElementById('couponModalTitle').innerText = 'üéüÔ∏è Buat Kupon Baru';
          document.getElementById('couponCode').value = '';
          document.getElementById('couponDesc').value = '';
          document.getElementById('couponPercentage').value = '';
          document.getElementById('couponExpiryDays').value = '7';
          document.getElementById('couponMaxUses').value = '100';
          document.getElementById('btnSaveCoupon').dataset.couponId = '';
          document.getElementById('modalCouponOverlay').classList.add('show');
        };
      }

      function setupSaveProductButton() {
        const btnSave = document.getElementById('btnSaveProduct');
        if (!btnSave) return;
        
        btnSave.addEventListener('click', function() {
          if (!currentUser || !currentUser.isDev) {
            alert('Hanya Dev yang bisa menambah produk!');
            return;
          }
          
          const name = document.getElementById('productName').value.trim();
          const desc = document.getElementById('productDesc').value.trim();
          const price = parseInt(document.getElementById('productPrice').value);
          const image = document.getElementById('productImage').value.trim();
          const wa = DEFAULT_WA;
          const category = parseInt(document.getElementById('productCategory').value);
          const editId = this.dataset.editId;
          
          if (!name || !desc || !price || price <= 0) {
            alert('Nama, deskripsi, dan harga harus diisi dengan benar!');
            return;
          }
          
          if (editId) {
            const index = products.findIndex(p => p.id == editId);
            if (index !== -1) {
              products[index] = {
                ...products[index],
                name: name,
                description: desc,
                price: price,
                image: image || '',
                waNumber: wa,
                category: category
              };
              alert('‚úÖ Produk berhasil diupdate!');
            }
          } else {
            const newProduct = {
              id: Date.now(),
              name: name,
              description: desc,
              price: price,
              image: image || '',
              category: category,
              waNumber: wa
            };
            
            products.push(newProduct);
            alert('‚úÖ Produk berhasil ditambahkan!');
          }
          
          localStorage.setItem('vallstore_products_v2', JSON.stringify(products));
          
          renderAllProducts();
          renderProductList();
          
          document.getElementById('modalProductOverlay').classList.remove('show');
        });
      }

      function setupSaveCouponButton() {
        const btnSave = document.getElementById('btnSaveCoupon');
        if (!btnSave) return;
        
        btnSave.addEventListener('click', function() {
          if (!currentUser || !currentUser.isDev) {
            alert('Hanya Dev yang bisa membuat kupon!');
            return;
          }
          
          const code = document.getElementById('couponCode').value.trim().toUpperCase();
          const desc = document.getElementById('couponDesc').value.trim();
          const percentage = parseInt(document.getElementById('couponPercentage').value);
          const expiryDays = parseInt(document.getElementById('couponExpiryDays').value);
          const maxUses = parseInt(document.getElementById('couponMaxUses').value) || 100;
          const editId = this.dataset.couponId;
          
          if (!code) {
            alert('Kode kupon harus diisi!');
            return;
          }
          
          if (!percentage || percentage < 1 || percentage > 100) {
            alert('Persentase harus antara 1-100%');
            return;
          }
          
          const now = new Date();
          const expiryDate = new Date(now);
          expiryDate.setDate(now.getDate() + expiryDays);
          const expiresAt = expiryDate.toISOString();
          
          if (!editId) {
            const existing = coupons.find(c => c.code === code);
            if (existing) {
              alert('Kode kupon sudah ada!');
              return;
            }
          }
          
          const couponData = {
            id: editId || Date.now(),
            code: code,
            description: desc || `Diskon ${percentage}%`,
            discount: percentage,
            maxUses: maxUses,
            usedCount: 0,
            expiresAt: expiresAt,
            expiryDays: expiryDays,
            isActive: true,
            createdBy: currentUser.username
          };
          
          if (editId) {
            const index = coupons.findIndex(c => c.id == editId);
            if (index !== -1) {
              couponData.usedCount = coupons[index].usedCount;
              coupons[index] = couponData;
              alert('‚úÖ Kupon berhasil diupdate!');
            }
          } else {
            coupons.push(couponData);
            alert('‚úÖ Kupon berhasil dibuat!');
          }
          
          localStorage.setItem('vallstore_coupons_v2', JSON.stringify(coupons));
          renderCouponList();
          
          document.getElementById('modalCouponOverlay').classList.remove('show');
          document.getElementById('couponCode').value = '';
          document.getElementById('couponDesc').value = '';
          document.getElementById('couponPercentage').value = '';
          document.getElementById('couponExpiryDays').value = '7';
          document.getElementById('couponMaxUses').value = '100';
          document.getElementById('btnSaveCoupon').dataset.couponId = '';
        });
      }

      function setupApplyCouponButton() {
        const applyBtn = document.getElementById('applyCouponBtn');
        if (!applyBtn) return;
        
        applyBtn.addEventListener('click', function() {
          const code = document.getElementById('couponInput').value;
          validateAndApplyCoupon(code);
        });
      }

      function setupBayarSekarangButton() {
        const bayarBtn = document.getElementById('bayarSekarangBtn');
        if (!bayarBtn) return;
        
        bayarBtn.addEventListener('click', function() {
          const nama = document.getElementById('namaInput').value.trim();
          const username = document.getElementById('usernameInput').value.trim();
          
          if (!nama || !username) {
            alert('‚ùå Nama dan username game harus diisi!');
            if (!nama) document.getElementById('namaInput').style.borderColor = '#ff6b6b';
            if (!username) document.getElementById('usernameInput').style.borderColor = '#ff6b6b';
            return;
          }
          
          document.getElementById('namaInput').style.borderColor = '#e0e7ef';
          document.getElementById('usernameInput').style.borderColor = '#e0e7ef';
          
          if (appliedCoupon && new Date(appliedCoupon.expiresAt) < new Date()) {
            alert('‚õî KUPON SUDAH EXPIRED! Silakan hapus kode promo.');
            appliedCoupon = null;
            document.getElementById('diskonRow').style.display = 'none';
            document.getElementById('rcTotal').innerText = document.getElementById('rcHargaAwal').innerText;
            document.getElementById('couponMessage').innerText = '‚ùå Kupon expired, silakan hapus';
            document.getElementById('couponMessage').style.color = '#ff6b6b';
            return;
          }
          
          let totalHarga = originalPrice;
          let diskonText = '';
          
          if (appliedCoupon) {
            const diskon = Math.floor(originalPrice * (appliedCoupon.discount / 100));
            totalHarga = Math.max(0, originalPrice - diskon);
            diskonText = `\nüí∞ Diskon: ${appliedCoupon.discount}% (Rp ${diskon.toLocaleString('id-ID')}) - Kode: ${appliedCoupon.code}`;
          }
          
          let waNumber = selectedProduct.waNumber || DEFAULT_WA;
          if (!waNumber.startsWith('62')) {
            if (waNumber.startsWith('0')) {
              waNumber = '62' + waNumber.substring(1);
            } else if (!waNumber.startsWith('+')) {
              waNumber = '62' + waNumber;
            }
          }
          waNumber = waNumber.replace(/[^0-9]/g, '');
          
          const noPesanan = document.getElementById('rcNo').innerText.replace('#', '');
          const namaProduk = selectedProduct.name;
          
          const message = `Halo Kak, saya mau order:

üìã *No. Pesanan:* #${noPesanan}
üì¶ *Nama Produk:* ${namaProduk}
üïπÔ∏è *Tipe Games:* Roblox
üë§ *Nama:* ${nama}
üéÆ *Username Game:* ${username}

üíµ *Harga Produk:* Rp ${originalPrice.toLocaleString('id-ID')}
üíé *Total Bayar:* Rp ${totalHarga.toLocaleString('id-ID')}
${diskonText}

Mohon diproses ya kak, terima kasih! üôè`;
          
          window.open(`https://wa.me/${waNumber}?text=${encodeURIComponent(message)}`, '_blank');
          
          orderCounter++;
          localStorage.setItem('vallstore_order_counter_v2', orderCounter.toString());
          
          if (appliedCoupon) {
            const couponIndex = coupons.findIndex(c => c.id === appliedCoupon.id);
            if (couponIndex !== -1) {
              coupons[couponIndex].usedCount++;
              localStorage.setItem('vallstore_coupons_v2', JSON.stringify(coupons));
            }
          }
          
          document.getElementById('modalOrderOverlay').classList.remove('show');
        });
      }

      function setupSearch() {
        const searchInput = document.getElementById('searchInput');
        if (!searchInput) return;
        
        searchInput.addEventListener('input', function(e) {
          const keyword = e.target.value.toLowerCase().trim();
          
          if (keyword === '') {
            renderAllProducts();
            return;
          }
          
          const filteredProducts = products.filter(p => 
            p.name.toLowerCase().includes(keyword) || 
            p.description.toLowerCase().includes(keyword)
          );
          
          const cat1 = filteredProducts.filter(p => p.category === 1);
          const cat2 = filteredProducts.filter(p => p.category === 2);
          const cat3 = filteredProducts.filter(p => p.category === 3);
          
          const renderFiltered = (gridId, categoryProducts) => {
            const grid = document.getElementById(gridId);
            if (!grid) return;
            
            if (categoryProducts.length === 0) {
              grid.innerHTML = `
                <div class="empty-grid-message">
                  <i class="fas fa-search"></i>
                  <p>Tidak ada produk yang cocok</p>
                  <small>Coba keyword lain</small>
                </div>
              `;
            } else {
              let html = '';
              categoryProducts.forEach(product => {
                let imageHtml = '';
                if (product.image && product.image.trim() !== '') {
                  imageHtml = `<img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.style.display='none';">`;
                }
                
                html += `
                  <div class="product-card">
                    ${imageHtml}
                    <div class="product-name">${product.name}</div>
                    <div class="product-desc">${product.description}</div>
                    <div class="product-footer">
                      <span class="product-price">Rp ${product.price.toLocaleString('id-ID')}</span>
                      <button class="btn-order" data-product-id="${product.id}">
                        <i class="fab fa-whatsapp"></i> Pesan
                      </button>
                    </div>
                    ${currentUser && currentUser.isDev ? `
                    <div class="dev-actions">
                      <button class="btn-edit-product" data-product-id="${product.id}"><i class="fas fa-edit"></i> Edit</button>
                      <button class="btn-delete-product" data-product-id="${product.id}"><i class="fas fa-trash"></i> Hapus</button>
                    </div>
                    ` : ''}
                  </div>
                `;
              });
              grid.innerHTML = html;
            }
          };
          
          renderFiltered('productGrid1', cat1);
          renderFiltered('productGrid2', cat2);
          renderFiltered('productGrid3', cat3);
          
          attachOrderButtons();
          if (currentUser && currentUser.isDev) {
            attachDevProductButtons();
          }
        });
      }

      function setupAddCouponButton() {
        const btnAdd = document.getElementById('btnAddCoupon');
        if (!btnAdd) return;
        
        btnAdd.addEventListener('click', function() {
          if (!currentUser || !currentUser.isDev) {
            alert('üîí Fitur ini hanya untuk Dev!');
            return;
          }
          
          document.getElementById('couponModalTitle').innerText = 'üéüÔ∏è Buat Kupon Baru';
          document.getElementById('couponCode').value = '';
          document.getElementById('couponDesc').value = '';
          document.getElementById('couponPercentage').value = '';
          document.getElementById('couponExpiryDays').value = '7';
          document.getElementById('couponMaxUses').value = '100';
          document.getElementById('btnSaveCoupon').dataset.couponId = '';
          document.getElementById('modalCouponOverlay').classList.add('show');
        });
      }

      document.addEventListener('DOMContentLoaded', function() {
        const loadingScreen = document.getElementById('loadingScreen');
        const loadingBarFill = document.getElementById('loadingBarFill');
        const loadingText = document.getElementById('loadingText');
        const loadingPercent = document.getElementById('loadingPercent');
        
        let progress = 0;
        const interval = setInterval(() => {
          progress += 2;
          loadingBarFill.style.width = progress + '%';
          loadingPercent.innerText = progress + '%';
          
          if (progress >= 50 && progress < 100) {
            loadingText.innerHTML = '<i class="fas fa-hourglass-half"></i> Loading Hampir Selesai';
          } else if (progress >= 100) {
            loadingText.innerHTML = '<i class="fas fa-check-circle"></i> Loading Selesai!';
            loadingPercent.innerText = '100%';
            clearInterval(interval);
            setTimeout(() => {
              loadingScreen.classList.add('hidden');
            }, 500);
          }
        }, 15);

        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        const menuToggle = document.getElementById('menuToggle');
        const closeSidebarBtn = document.getElementById('closeSidebarBtn');

        function openSidebar() {
          sidebar.classList.add('open');
          overlay.classList.add('active');
        }

        function closeSidebar() {
          sidebar.classList.remove('open');
          overlay.classList.remove('active');
        }

        menuToggle.addEventListener('click', openSidebar);
        closeSidebarBtn.addEventListener('click', closeSidebar);
        overlay.addEventListener('click', closeSidebar);

        document.getElementById('menuHome').addEventListener('click', function(e) {
          e.preventDefault();
          closeSidebar();
          document.getElementById('homeProfileSection').scrollIntoView({ behavior: 'smooth' });
        });

        document.getElementById('menuProduk').addEventListener('click', function(e) {
          e.preventDefault();
          closeSidebar();
          document.querySelector('.section-title').scrollIntoView({ behavior: 'smooth' });
        });

        document.getElementById('menuCaraOrder').addEventListener('click', function(e) {
          e.preventDefault();
          closeSidebar();
          document.getElementById('modalCaraOrderOverlay').classList.add('show');
        });

        document.getElementById('menuSosmed').addEventListener('click', function(e) {
          e.preventDefault();
          closeSidebar();
          document.getElementById('modalSosmedOverlay').classList.add('show');
        });

        document.getElementById('menuLogin').addEventListener('click', function(e) {
          e.preventDefault();
          closeSidebar();
          document.getElementById('modalAuthOverlay').classList.add('show');
        });

        document.getElementById('loginIndicator').addEventListener('click', function() {
          if (!currentUser) {
            document.getElementById('modalAuthOverlay').classList.add('show');
          } else {
            openSidebar();
          }
        });

        document.getElementById('tabLogin').addEventListener('click', function() {
          document.getElementById('tabLogin').classList.add('active');
          document.getElementById('tabRegister').classList.remove('active');
          document.getElementById('loginForm').style.display = 'block';
          document.getElementById('registerForm').style.display = 'none';
        });

        document.getElementById('tabRegister').addEventListener('click', function() {
          document.getElementById('tabRegister').classList.add('active');
          document.getElementById('tabLogin').classList.remove('active');
          document.getElementById('registerForm').style.display = 'block';
          document.getElementById('loginForm').style.display = 'none';
        });

        document.getElementById('btnRegister').addEventListener('click', function() {
          const username = document.getElementById('regUsername').value.trim();
          const email = document.getElementById('regEmail').value.trim();
          const password = document.getElementById('regPassword').value;
          const confirmPass = document.getElementById('regConfirmPassword').value;

          if (!username || !email || !password) {
            alert('‚ùå Semua field harus diisi!');
            return;
          }

          if (password.length < 8) {
            alert('‚ùå Password minimal 8 karakter!');
            return;
          }

          if (password !== confirmPass) {
            alert('‚ùå Password tidak cocok!');
            return;
          }

          if (users.find(u => u.username === username && !u.isDeleted)) {
            alert('‚ùå Username sudah digunakan!');
            return;
          }

          if (users.find(u => u.email === email && !u.isDeleted)) {
            alert('‚ùå Email sudah terdaftar!');
            return;
          }

          try {
            const hashedPassword = secureHash(password);
            
            const newUser = {
              id: Date.now(),
              username: username,
              email: email,
              passwordHash: hashedPassword,
              createdAt: new Date().toISOString(),
              isDev: email === DEV_EMAIL,
              isBlocked: false,
              isDeleted: false
            };

            users.push(newUser);
            localStorage.setItem('vallstore_users_v2', JSON.stringify(users));
            
            alert('‚úÖ Registrasi berhasil! Silakan login.');
            
            document.getElementById('regUsername').value = '';
            document.getElementById('regEmail').value = '';
            document.getElementById('regPassword').value = '';
            document.getElementById('regConfirmPassword').value = '';
            
            document.getElementById('tabLogin').click();
          } catch (error) {
            console.error('Registration error:', error);
            alert('‚ùå Gagal registrasi. Coba lagi.');
          }
        });

        document.getElementById('btnLogin').addEventListener('click', function() {
          const identifier = document.getElementById('loginIdentifier').value.trim();
          const password = document.getElementById('loginPassword').value;

          if (!identifier || !password) {
            alert('‚ùå Isi email/username dan password!');
            return;
          }

          const user = users.find(u => (u.username === identifier || u.email === identifier) && !u.isDeleted);
          
          if (!user) {
            alert('‚ùå User tidak ditemukan!');
            return;
          }
          
          if (user.isBlocked) {
            showBlockedMessage('Anda diblokir oleh Admin');
            return;
          }

          try {
            const hashedInput = secureHash(password);
            
            if (hashedInput === user.passwordHash) {
              currentUser = {
                username: user.username,
                email: user.email,
                isDev: user.isDev || false
              };
              localStorage.setItem('currentUser_v2', JSON.stringify(currentUser));
              
              document.getElementById('modalAuthOverlay').classList.remove('show');
              document.getElementById('loginIdentifier').value = '';
              document.getElementById('loginPassword').value = '';
              
              updateUI();
              alert(`‚úÖ Selamat datang ${user.username}!`);
            } else {
              alert('‚ùå Password salah!');
            }
          } catch (error) {
            console.error('Login error:', error);
            alert('‚ùå Gagal login. Coba lagi.');
          }
        });

        document.getElementById('menuLogout').addEventListener('click', function(e) {
          e.preventDefault();
          currentUser = null;
          localStorage.removeItem('currentUser_v2');
          updateUI();
          closeSidebar();
          alert('‚úÖ Logout berhasil!');
        });

        document.getElementById('tutupAuthModal').addEventListener('click', function() {
          document.getElementById('modalAuthOverlay').classList.remove('show');
        });

        document.getElementById('tutupProductModal').addEventListener('click', function() {
          document.getElementById('modalProductOverlay').classList.remove('show');
        });

        document.getElementById('tutupCouponModal').addEventListener('click', function() {
          document.getElementById('modalCouponOverlay').classList.remove('show');
        });

        document.getElementById('tutupModalBtn').addEventListener('click', function() {
          document.getElementById('modalOrderOverlay').classList.remove('show');
        });

        document.getElementById('tutupCaraOrderBtn').addEventListener('click', function() {
          document.getElementById('modalCaraOrderOverlay').classList.remove('show');
        });

        document.getElementById('tutupSosmedModal').addEventListener('click', function() {
          document.getElementById('modalSosmedOverlay').classList.remove('show');
        });

        const modals = [
          document.getElementById('modalAuthOverlay'),
          document.getElementById('modalProductOverlay'),
          document.getElementById('modalCouponOverlay'),
          document.getElementById('modalOrderOverlay'),
          document.getElementById('modalCaraOrderOverlay'),
          document.getElementById('modalSosmedOverlay')
        ];

        modals.forEach(modal => {
          modal.addEventListener('click', function(e) {
            if (e.target === modal) {
              modal.classList.remove('show');
            }
          });
        });

        document.getElementById('tiktokCard').addEventListener('click', function() {
          window.open(TIKTOK_URL, '_blank');
        });

        document.getElementById('waGroupCard').addEventListener('click', function() {
          window.open(WA_GROUP_URL, '_blank');
        });

        // ===== SALURAN TESTIMONI =====
        document.getElementById('waChannelCard').addEventListener('click', function() {
          window.open(WA_CHANNEL_URL, '_blank');
        });

        document.querySelectorAll('.dev-tab').forEach(tab => {
          tab.addEventListener('click', function() {
            document.querySelectorAll('.dev-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.dev-content').forEach(c => c.classList.remove('active'));
            
            tab.classList.add('active');
            const tabName = tab.dataset.tab;
            const contentId = `dev${tabName.charAt(0).toUpperCase() + tabName.slice(1)}Tab`;
            document.getElementById(contentId).classList.add('active');
            
            if (tabName === 'users') {
              renderUserList();
            } else if (tabName === 'products') {
              renderProductList();
            } else if (tabName === 'coupons') {
              renderCouponList();
            }
          });
        });

        // ===== CEK FORM PESANAN =====
        const namaInput = document.getElementById('namaInput');
        const usernameInput = document.getElementById('usernameInput');
        
        if (namaInput && usernameInput) {
          namaInput.addEventListener('input', checkOrderForm);
          usernameInput.addEventListener('input', checkOrderForm);
        }

        setupAddProductButtons();
        setupAddUserButton();
        setupAddCouponFromDevButton();
        setupSaveProductButton();
        setupAddCouponButton();
        setupSaveCouponButton();
        setupApplyCouponButton();
        setupBayarSekarangButton();
        setupSearch();

        updateUI();
      });
    })();
  </script>
</body>
</html>